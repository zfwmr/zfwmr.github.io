language: go
go:
- 1.6
env:
  global:
  - SSH_KEY="id_rsa"
  - GIT_NAME="zf@bupt.edu.cn"
  - GIT_EMAIL="zf@bupt.edu.cn"
  - SOURCE_DIR="public"
  - DEPLOY_BRANCH="source"
git:
  submodules: false
before_install:
- openssl aes-256-cbc -K $encrypted_b8a265b64f65_key -iv $encrypted_b8a265b64f65_iv
  -in id_rsa.enc -out id_rsa -d
install:
- git clone --branch v2 https://github.com/go-yaml/yaml $GOPATH/src/gopkg.in/yaml.v2
- go get -u -v github.com/spf13/hugo
script:
- hugo --theme=hyde-x 
after_success:
- echo "zfwmr.github.io" > ./public/CNAME
- bash -x ./scripts/deploy.sh
